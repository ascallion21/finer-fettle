@inherits RefreshablePageBase
@using CommunityToolkit.Maui.Alerts

@if (HasLoggedIn)
{
    <Lib.AppMain Email='@Email' Token="@Token" Date="DateOnly.FromDateTime(DateTime.UtcNow)" />
}

@code {
    private bool HasLoggedIn => Email != null && Token != null;

    private string? Email { get; set; }
    private string? Token { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Email = Preferences.Default.Get<string?>(nameof(PreferenceKeys.Email), null);
        Token = Preferences.Default.Get<string?>(nameof(PreferenceKeys.Token), null);
    }
}
